{"remainingRequest":"/home/access/Desktop/Bodhi-PetProjects/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/access/Desktop/Bodhi-PetProjects/src/components/StarRating.vue?vue&type=template&id=6ac6593f&scoped=true","dependencies":[{"path":"/home/access/Desktop/Bodhi-PetProjects/src/components/StarRating.vue","mtime":1626880744181},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgogIDxkaXYgaWQ9ImFwcCI+CiAgICA8ZGl2IHYtaWY9ImlzSW5pdGlhbFJlcXVlc3RMb2FkaW5nIj4KICAgICAgTG9hZGluZyB1c2Vycy4uLgogICAgPC9kaXY+CiAgICA8dWwgY2xhc3M9InVzZXJzIj4KICAgICAgPGxpCiAgICAgICAgdi1mb3I9InVzZXIgaW4gdXNlcnMiCiAgICAgICAgOmtleT0idXNlci5pZCIKICAgICAgICBjbGFzcz0idXNlciIKICAgICAgPgogICAgICAgIDxpbWcgOnNyYz0idXNlci5hdmF0YXIiIC8+CiAgICAgICAgPGgzPnt7IHVzZXIubmFtZSB9fTwvaDM+CiAgICAgIDwvbGk+CiAgICA8L3VsPgoKICAgIDxkaXYKICAgICAgdi1pZj0iaXNMb2FkaW5nIgogICAgICBjbGFzcz0ibG9hZGluZy1zcGlubmVyIgogICAgPgogICAgICBMb2FkaW5nIG1vYXIgdXNlcnMKICAgIDwvZGl2PgogICAgPGRpdgogICAgICB2LWlmPSJoYXNGZXRjaGVkQWxsRGF0YSIKICAgICAgY2xhc3M9ImxvYWRpbmctc3Bpbm5lciIKICAgID4KICAgICAgTm8gTW9yZSBEYXRhCiAgICA8L2Rpdj4KICA8L2Rpdj4K"},{"version":3,"sources":["/home/access/Desktop/Bodhi-PetProjects/src/components/StarRating.vue"],"names":[],"mappings":";;EAEE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACX,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACjC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACf,CAAC,CAAC;QACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACb;QACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACzB,CAAC,CAAC,CAAC,CAAC;IACN,CAAC,CAAC,CAAC,CAAC;;IAEJ,CAAC,CAAC,CAAC;MACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACxB;MACE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACnB,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;MACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACxB;MACE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACb,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/home/access/Desktop/Bodhi-PetProjects/src/components/StarRating.vue","sourceRoot":"","sourcesContent":["<template>\n\n  <div id=\"app\">\n    <div v-if=\"isInitialRequestLoading\">\n      Loading users...\n    </div>\n    <ul class=\"users\">\n      <li\n        v-for=\"user in users\"\n        :key=\"user.id\"\n        class=\"user\"\n      >\n        <img :src=\"user.avatar\" />\n        <h3>{{ user.name }}</h3>\n      </li>\n    </ul>\n\n    <div\n      v-if=\"isLoading\"\n      class=\"loading-spinner\"\n    >\n      Loading moar users\n    </div>\n    <div\n      v-if=\"hasFetchedAllData\"\n      class=\"loading-spinner\"\n    >\n      No More Data\n    </div>\n  </div>\n</template>\n\n<script>\n  import { ref, onBeforeMount, onMounted, onBeforeUnmount, computed } from 'vue'\n\n  export default {\n    name:\"StarRating\",\n    setup() {\n      const users = ref([])\n      const currentPage = ref(0)\n      const totalPages = ref()\n      const limit = 10\n      const isInitialRequestLoading = ref(true)\n      const isLoading = ref(false)\n\n      const hasFetchedAllData = computed(() => {\n        return currentPage.value === totalPages.value && !isLoading.value\n      })\n\n      const fetchUsers = async () => {\n        currentPage.value++\n\n        try {\n          const response = await fetch(`http://localhost:3000/api/v1/users?limit=${limit}&page=${currentPage.value}`)\n          const parsedResponse = await response.json()\n  \n          users.value = [\n            ...users.value,\n            ...parsedResponse.data\n          ]\n          totalPages.value = parsedResponse.totalPages\n        } catch(err) {\n          console.log(err)\n        }\n      }\n\n      let handleScroll = async () => {\n        if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {\n          console.log(hasFetchedAllData.value || isLoading.value)\n          if (hasFetchedAllData.value || isLoading.value) {\n            return\n          }\n\n          isLoading.value = true\n          \n          await fetchUsers()\n\n          isLoading.value = false\n        }\n      }\n\n      onBeforeMount(async () => {\n        await fetchUsers()\n        isInitialRequestLoading.value = false\n      })\n\n      onMounted(() => {\n        window.addEventListener('scroll', handleScroll)\n      })\n\n      onBeforeUnmount(() => {\n        window.removeEventListener('scroll', handleScroll)\n      })\n\n      return {\n        users,\n        isInitialRequestLoading,\n        isLoading,\n        hasFetchedAllData,\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  #app {\n    font-family: Avenir, Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    text-align: center;\n    color: #2c3e50;\n    margin-top: 60px;\n  }\n\n  .users {\n    padding-bottom: 5rem;\n  }\n\n  .user {\n    list-style: none;\n  }\n\n  .loading-spinner {\n    padding-bottom: 3rem;\n  }\n</style>\n"]}]}