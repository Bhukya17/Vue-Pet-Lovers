{"remainingRequest":"/home/access/Desktop/Bodhi-PetProjects/node_modules/babel-loader/lib/index.js!/home/access/Desktop/Bodhi-PetProjects/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/home/access/Desktop/Bodhi-PetProjects/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/access/Desktop/Bodhi-PetProjects/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/access/Desktop/Bodhi-PetProjects/src/components/StarRating.vue?vue&type=template&id=6ac6593f&scoped=true","dependencies":[{"path":"/home/access/Desktop/Bodhi-PetProjects/src/components/StarRating.vue","mtime":1626880744181},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIGNyZWF0ZUNvbW1lbnRWTm9kZSBhcyBfY3JlYXRlQ29tbWVudFZOb2RlLCByZW5kZXJMaXN0IGFzIF9yZW5kZXJMaXN0LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgdG9EaXNwbGF5U3RyaW5nIGFzIF90b0Rpc3BsYXlTdHJpbmcsIHdpdGhTY29wZUlkIGFzIF93aXRoU2NvcGVJZCwgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCnZhciBfd2l0aElkID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZCgiZGF0YS12LTZhYzY1OTNmIik7CgpfcHVzaFNjb3BlSWQoImRhdGEtdi02YWM2NTkzZiIpOwoKdmFyIF9ob2lzdGVkXzEgPSB7CiAgaWQ6ICJhcHAiCn07CnZhciBfaG9pc3RlZF8yID0gewogIGtleTogMAp9Owp2YXIgX2hvaXN0ZWRfMyA9IHsKICAiY2xhc3MiOiAidXNlcnMiCn07CnZhciBfaG9pc3RlZF80ID0gewogIGtleTogMSwKICAiY2xhc3MiOiAibG9hZGluZy1zcGlubmVyIgp9Owp2YXIgX2hvaXN0ZWRfNSA9IHsKICBrZXk6IDIsCiAgImNsYXNzIjogImxvYWRpbmctc3Bpbm5lciIKfTsKCl9wb3BTY29wZUlkKCk7CgpleHBvcnQgdmFyIHJlbmRlciA9IC8qI19fUFVSRV9fKi9fd2l0aElkKGZ1bmN0aW9uIChfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFskc2V0dXAuaXNJbml0aWFsUmVxdWVzdExvYWRpbmcgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzIsICIgTG9hZGluZyB1c2Vycy4uLiAiKSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSksIF9jcmVhdGVWTm9kZSgidWwiLCBfaG9pc3RlZF8zLCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KCRzZXR1cC51c2VycywgZnVuY3Rpb24gKHVzZXIpIHsKICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygibGkiLCB7CiAgICAgIGtleTogdXNlci5pZCwKICAgICAgImNsYXNzIjogInVzZXIiCiAgICB9LCBbX2NyZWF0ZVZOb2RlKCJpbWciLCB7CiAgICAgIHNyYzogdXNlci5hdmF0YXIKICAgIH0sIG51bGwsIDgKICAgIC8qIFBST1BTICovCiAgICAsIFsic3JjIl0pLCBfY3JlYXRlVk5vZGUoImgzIiwgbnVsbCwgX3RvRGlzcGxheVN0cmluZyh1c2VyLm5hbWUpLCAxCiAgICAvKiBURVhUICovCiAgICApXSk7CiAgfSksIDEyOAogIC8qIEtFWUVEX0ZSQUdNRU5UICovCiAgKSldKSwgJHNldHVwLmlzTG9hZGluZyA/IChfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgX2hvaXN0ZWRfNCwgIiBMb2FkaW5nIG1vYXIgdXNlcnMgIikpIDogX2NyZWF0ZUNvbW1lbnRWTm9kZSgidi1pZiIsIHRydWUpLCAkc2V0dXAuaGFzRmV0Y2hlZEFsbERhdGEgPyAoX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzUsICIgTm8gTW9yZSBEYXRhICIpKSA6IF9jcmVhdGVDb21tZW50Vk5vZGUoInYtaWYiLCB0cnVlKV0pOwp9KTs="},{"version":3,"sources":["/home/access/Desktop/Bodhi-PetProjects/src/components/StarRating.vue"],"names":[],"mappings":";;;;;;;;AAEO,EAAA,EAAE,EAAC;;;;;;AAIF,WAAM;;;;AAaR,WAAM;;;;AAMN,WAAM;;;;;;uBAvBV,YAAA,CA2BM,KA3BN,EAAA,UAAA,EA2BM,CA1BO,MAAA,CAAA,uB,kBAAX,YAAA,CAEM,KAFN,EAEM,UAFN,EAAoC,oBAApC,C,qCA0BI,EAvBJ,YAAA,CASK,IATL,EAAA,UAAA,EASK,E,kBARH,YAAA,CAOK,SAPL,EAOK,IAPL,EAOK,WAAA,CANY,MAAA,CAAA,KAMZ,EANiB,UAAb,IAAa,EAAT;yBADb,YAAA,CAOK,IAPL,EAOK;AALF,MAAA,GAAG,EAAE,IAAI,CAAC,EAKR;AAJH,eAAM;AAIH,KAPL,E,CAKE,YAAA,CAA0B,KAA1B,EAA0B;AAApB,MAAA,GAAG,EAAE,IAAI,CAAC;AAAU,KAA1B,E,IAAA,E;;AAAA,M,OAAA,C,EACA,YAAA,CAAwB,IAAxB,EAAwB,IAAxB,EAAwB,gBAAA,CAAjB,IAAI,CAAC,IAAY,CAAxB,EAAgB;AAAA;AAAhB,K,CANF,C;GAOK,CAPL,E;;AAAA,GAQG,EATL,CAuBI,EAXI,MAAA,CAAA,S,kBADR,YAAA,CAKM,KALN,EAAA,UAAA,EAGC,sBAHD,C,qCAYI,EALI,MAAA,CAAA,iB,kBADR,YAAA,CAKM,KALN,EAAA,UAAA,EAGC,gBAHD,C,qCAMI,CA3BN,C","sourcesContent":["<template>\n\n  <div id=\"app\">\n    <div v-if=\"isInitialRequestLoading\">\n      Loading users...\n    </div>\n    <ul class=\"users\">\n      <li\n        v-for=\"user in users\"\n        :key=\"user.id\"\n        class=\"user\"\n      >\n        <img :src=\"user.avatar\" />\n        <h3>{{ user.name }}</h3>\n      </li>\n    </ul>\n\n    <div\n      v-if=\"isLoading\"\n      class=\"loading-spinner\"\n    >\n      Loading moar users\n    </div>\n    <div\n      v-if=\"hasFetchedAllData\"\n      class=\"loading-spinner\"\n    >\n      No More Data\n    </div>\n  </div>\n</template>\n\n<script>\n  import { ref, onBeforeMount, onMounted, onBeforeUnmount, computed } from 'vue'\n\n  export default {\n    name:\"StarRating\",\n    setup() {\n      const users = ref([])\n      const currentPage = ref(0)\n      const totalPages = ref()\n      const limit = 10\n      const isInitialRequestLoading = ref(true)\n      const isLoading = ref(false)\n\n      const hasFetchedAllData = computed(() => {\n        return currentPage.value === totalPages.value && !isLoading.value\n      })\n\n      const fetchUsers = async () => {\n        currentPage.value++\n\n        try {\n          const response = await fetch(`http://localhost:3000/api/v1/users?limit=${limit}&page=${currentPage.value}`)\n          const parsedResponse = await response.json()\n  \n          users.value = [\n            ...users.value,\n            ...parsedResponse.data\n          ]\n          totalPages.value = parsedResponse.totalPages\n        } catch(err) {\n          console.log(err)\n        }\n      }\n\n      let handleScroll = async () => {\n        if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {\n          console.log(hasFetchedAllData.value || isLoading.value)\n          if (hasFetchedAllData.value || isLoading.value) {\n            return\n          }\n\n          isLoading.value = true\n          \n          await fetchUsers()\n\n          isLoading.value = false\n        }\n      }\n\n      onBeforeMount(async () => {\n        await fetchUsers()\n        isInitialRequestLoading.value = false\n      })\n\n      onMounted(() => {\n        window.addEventListener('scroll', handleScroll)\n      })\n\n      onBeforeUnmount(() => {\n        window.removeEventListener('scroll', handleScroll)\n      })\n\n      return {\n        users,\n        isInitialRequestLoading,\n        isLoading,\n        hasFetchedAllData,\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  #app {\n    font-family: Avenir, Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    text-align: center;\n    color: #2c3e50;\n    margin-top: 60px;\n  }\n\n  .users {\n    padding-bottom: 5rem;\n  }\n\n  .user {\n    list-style: none;\n  }\n\n  .loading-spinner {\n    padding-bottom: 3rem;\n  }\n</style>\n"],"sourceRoot":""}]}