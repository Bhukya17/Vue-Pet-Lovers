{"remainingRequest":"/home/access/Desktop/Bodhi-PetProjects/node_modules/babel-loader/lib/index.js!/home/access/Desktop/Bodhi-PetProjects/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/access/Desktop/Bodhi-PetProjects/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/access/Desktop/Bodhi-PetProjects/src/components/StarRating.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/access/Desktop/Bodhi-PetProjects/src/components/StarRating.vue","mtime":1626880744181},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/access/Desktop/Bodhi-PetProjects/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvaG9tZS9hY2Nlc3MvRGVza3RvcC9Cb2RoaS1QZXRQcm9qZWN0cy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvYWNjZXNzL0Rlc2t0b3AvQm9kaGktUGV0UHJvamVjdHMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgeyByZWYsIG9uQmVmb3JlTW91bnQsIG9uTW91bnRlZCwgb25CZWZvcmVVbm1vdW50LCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU3RhclJhdGluZyIsCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHVzZXJzID0gcmVmKFtdKTsKICAgIHZhciBjdXJyZW50UGFnZSA9IHJlZigwKTsKICAgIHZhciB0b3RhbFBhZ2VzID0gcmVmKCk7CiAgICB2YXIgbGltaXQgPSAxMDsKICAgIHZhciBpc0luaXRpYWxSZXF1ZXN0TG9hZGluZyA9IHJlZih0cnVlKTsKICAgIHZhciBpc0xvYWRpbmcgPSByZWYoZmFsc2UpOwogICAgdmFyIGhhc0ZldGNoZWRBbGxEYXRhID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gY3VycmVudFBhZ2UudmFsdWUgPT09IHRvdGFsUGFnZXMudmFsdWUgJiYgIWlzTG9hZGluZy52YWx1ZTsKICAgIH0pOwoKICAgIHZhciBmZXRjaFVzZXJzID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlLCBwYXJzZWRSZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZS52YWx1ZSsrOwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS92MS91c2Vycz9saW1pdD0iLmNvbmNhdChsaW1pdCwgIiZwYWdlPSIpLmNvbmNhdChjdXJyZW50UGFnZS52YWx1ZSkpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIHBhcnNlZFJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHVzZXJzLnZhbHVlID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh1c2Vycy52YWx1ZSksIF90b0NvbnN1bWFibGVBcnJheShwYXJzZWRSZXNwb25zZS5kYXRhKSk7CiAgICAgICAgICAgICAgICB0b3RhbFBhZ2VzLnZhbHVlID0gcGFyc2VkUmVzcG9uc2UudG90YWxQYWdlczsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEyOwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwKTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgMTJdXSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBmZXRjaFVzZXJzKCkgewogICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH07CiAgICB9KCk7CgogICAgdmFyIGhhbmRsZVNjcm9sbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKHdpbmRvdy5pbm5lckhlaWdodCArIHdpbmRvdy5zY3JvbGxZID49IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0KSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGhhc0ZldGNoZWRBbGxEYXRhLnZhbHVlIHx8IGlzTG9hZGluZy52YWx1ZSk7CgogICAgICAgICAgICAgICAgaWYgKCEoaGFzRmV0Y2hlZEFsbERhdGEudmFsdWUgfHwgaXNMb2FkaW5nLnZhbHVlKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgaXNMb2FkaW5nLnZhbHVlID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaFVzZXJzKCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGlzTG9hZGluZy52YWx1ZSA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlU2Nyb2xsKCkgewogICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIG9uQmVmb3JlTW91bnQoIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gZmV0Y2hVc2VycygpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGlzSW5pdGlhbFJlcXVlc3RMb2FkaW5nLnZhbHVlID0gZmFsc2U7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkpOwogICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhhbmRsZVNjcm9sbCk7CiAgICB9KTsKICAgIG9uQmVmb3JlVW5tb3VudChmdW5jdGlvbiAoKSB7CiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBoYW5kbGVTY3JvbGwpOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICB1c2VyczogdXNlcnMsCiAgICAgIGlzSW5pdGlhbFJlcXVlc3RMb2FkaW5nOiBpc0luaXRpYWxSZXF1ZXN0TG9hZGluZywKICAgICAgaXNMb2FkaW5nOiBpc0xvYWRpbmcsCiAgICAgIGhhc0ZldGNoZWRBbGxEYXRhOiBoYXNGZXRjaGVkQWxsRGF0YQogICAgfTsKICB9Cn07"},{"version":3,"sources":["/home/access/Desktop/Bodhi-PetProjects/src/components/StarRating.vue"],"names":[],"mappings":";;;;;AAiCE,SAAS,GAAT,EAAc,aAAd,EAA6B,SAA7B,EAAwC,eAAxC,EAAyD,QAAzD,QAAyE,KAAzE;AAEA,eAAe;AACb,EAAA,IAAI,EAAC,YADQ;AAEb,EAAA,KAFa,mBAEL;AACN,QAAM,KAAI,GAAI,GAAG,CAAC,EAAD,CAAjB;AACA,QAAM,WAAU,GAAI,GAAG,CAAC,CAAD,CAAvB;AACA,QAAM,UAAS,GAAI,GAAG,EAAtB;AACA,QAAM,KAAI,GAAI,EAAd;AACA,QAAM,uBAAsB,GAAI,GAAG,CAAC,IAAD,CAAnC;AACA,QAAM,SAAQ,GAAI,GAAG,CAAC,KAAD,CAArB;AAEA,QAAM,iBAAgB,GAAI,QAAQ,CAAC,YAAM;AACvC,aAAO,WAAW,CAAC,KAAZ,KAAsB,UAAU,CAAC,KAAjC,IAA0C,CAAC,SAAS,CAAC,KAA5D;AACD,KAFiC,CAAlC;;AAIA,QAAM,UAAS;AAAA,yEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AACjB,gBAAA,WAAW,CAAC,KAAZ;AADiB;AAAA;AAAA,uBAIQ,KAAK,oDAA6C,KAA7C,mBAA2D,WAAW,CAAC,KAAvE,EAJb;;AAAA;AAIT,gBAAA,QAJS;AAAA;AAAA,uBAKc,QAAQ,CAAC,IAAT,EALd;;AAAA;AAKT,gBAAA,cALS;AAOf,gBAAA,KAAK,CAAC,KAAN,gCACK,KAAK,CAAC,KADX,sBAEK,cAAc,CAAC,IAFpB;AAIA,gBAAA,UAAU,CAAC,KAAX,GAAmB,cAAc,CAAC,UAAlC;AAXe;AAAA;;AAAA;AAAA;AAAA;AAaf,gBAAA,OAAO,CAAC,GAAR;;AAbe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAT,UAAS;AAAA;AAAA;AAAA,OAAf;;AAiBA,QAAI,YAAW;AAAA,0EAAI;AAAA;AAAA;AAAA;AAAA;AAAA,sBACZ,MAAM,CAAC,WAAP,GAAqB,MAAM,CAAC,OAA7B,IAAyC,QAAQ,CAAC,IAAT,CAAc,YAD1C;AAAA;AAAA;AAAA;;AAEf,gBAAA,OAAO,CAAC,GAAR,CAAY,iBAAiB,CAAC,KAAlB,IAA2B,SAAS,CAAC,KAAjD;;AAFe,sBAGX,iBAAiB,CAAC,KAAlB,IAA2B,SAAS,CAAC,KAH1B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAOf,gBAAA,SAAS,CAAC,KAAV,GAAkB,IAAlB;AAPe;AAAA,uBAST,UAAU,EATD;;AAAA;AAWf,gBAAA,SAAS,CAAC,KAAV,GAAkB,KAAlB;;AAXe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAX,YAAW;AAAA;AAAA;AAAA,OAAf;;AAeA,IAAA,aAAa,uEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACN,UAAU,EADJ;;AAAA;AAEZ,cAAA,uBAAuB,CAAC,KAAxB,GAAgC,KAAhC;;AAFY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAAb;AAKA,IAAA,SAAS,CAAC,YAAM;AACd,MAAA,MAAM,CAAC,gBAAP,CAAwB,QAAxB,EAAkC,YAAlC;AACD,KAFQ,CAAT;AAIA,IAAA,eAAe,CAAC,YAAM;AACpB,MAAA,MAAM,CAAC,mBAAP,CAA2B,QAA3B,EAAqC,YAArC;AACD,KAFc,CAAf;AAIA,WAAO;AACL,MAAA,KAAK,EAAL,KADK;AAEL,MAAA,uBAAuB,EAAvB,uBAFK;AAGL,MAAA,SAAS,EAAT,SAHK;AAIL,MAAA,iBAAiB,EAAjB;AAJK,KAAP;AAMF;AAjEa,CAAf","sourcesContent":["<template>\n\n  <div id=\"app\">\n    <div v-if=\"isInitialRequestLoading\">\n      Loading users...\n    </div>\n    <ul class=\"users\">\n      <li\n        v-for=\"user in users\"\n        :key=\"user.id\"\n        class=\"user\"\n      >\n        <img :src=\"user.avatar\" />\n        <h3>{{ user.name }}</h3>\n      </li>\n    </ul>\n\n    <div\n      v-if=\"isLoading\"\n      class=\"loading-spinner\"\n    >\n      Loading moar users\n    </div>\n    <div\n      v-if=\"hasFetchedAllData\"\n      class=\"loading-spinner\"\n    >\n      No More Data\n    </div>\n  </div>\n</template>\n\n<script>\n  import { ref, onBeforeMount, onMounted, onBeforeUnmount, computed } from 'vue'\n\n  export default {\n    name:\"StarRating\",\n    setup() {\n      const users = ref([])\n      const currentPage = ref(0)\n      const totalPages = ref()\n      const limit = 10\n      const isInitialRequestLoading = ref(true)\n      const isLoading = ref(false)\n\n      const hasFetchedAllData = computed(() => {\n        return currentPage.value === totalPages.value && !isLoading.value\n      })\n\n      const fetchUsers = async () => {\n        currentPage.value++\n\n        try {\n          const response = await fetch(`http://localhost:3000/api/v1/users?limit=${limit}&page=${currentPage.value}`)\n          const parsedResponse = await response.json()\n  \n          users.value = [\n            ...users.value,\n            ...parsedResponse.data\n          ]\n          totalPages.value = parsedResponse.totalPages\n        } catch(err) {\n          console.log(err)\n        }\n      }\n\n      let handleScroll = async () => {\n        if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {\n          console.log(hasFetchedAllData.value || isLoading.value)\n          if (hasFetchedAllData.value || isLoading.value) {\n            return\n          }\n\n          isLoading.value = true\n          \n          await fetchUsers()\n\n          isLoading.value = false\n        }\n      }\n\n      onBeforeMount(async () => {\n        await fetchUsers()\n        isInitialRequestLoading.value = false\n      })\n\n      onMounted(() => {\n        window.addEventListener('scroll', handleScroll)\n      })\n\n      onBeforeUnmount(() => {\n        window.removeEventListener('scroll', handleScroll)\n      })\n\n      return {\n        users,\n        isInitialRequestLoading,\n        isLoading,\n        hasFetchedAllData,\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  #app {\n    font-family: Avenir, Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    text-align: center;\n    color: #2c3e50;\n    margin-top: 60px;\n  }\n\n  .users {\n    padding-bottom: 5rem;\n  }\n\n  .user {\n    list-style: none;\n  }\n\n  .loading-spinner {\n    padding-bottom: 3rem;\n  }\n</style>\n"],"sourceRoot":""}]}